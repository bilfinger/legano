const se_keep=(xsub,xtable,xenv) => {console.log('keepalive');if(xsub.subactive){console.log('active keepalive',xsub.subscribers.length);xsub.subscribers.forEach((e,i,a) => e.write('event: keep\nid:'+Date.now().toString(23)+'\ndata: {"type": "keep","table":"'+xtable+'","users":'+a.length+',"time":'+Date.now()+',"env":'+JSON.stringify(xenv)+'}\n\n'))}},se_update=(xsub,index,id,elem) => {console.log('UPDATE CALLBACK se_update',index,id,elem);xsub.subscribers.forEach((e,i,a) => e.write('id:'+Date.now().toString(23)+'\nevent:update\ndata: {"tableid":"'+id+'","table":"'+index+'","type": "update","users":'+a.length+',"time":'+Date.now()+',"elem":'+JSON.stringify(elem)+'}\n\n'))},se_bupdate=(xsub,index,data) => {console.log('bulkKV-UPDATE CALLBACK se_bupdate',index,data);xsub.subscribers.forEach((e,i,a) => e.write('id:'+Date.now().toString(23)+'\nevent:bupdate\ndata: {"table":"'+index+'","type": "update","users":'+a.length+',"time":'+Date.now()+',"value":'+JSON.stringify(data)+'}\n\n'))},se_kvupdate=(xsub,index,id,type,value) => {console.log('KV-UPDATE CALLBACK se_update',index,id,type,value);xsub.subscribers.forEach((e,i,a) => e.write('id:'+Date.now().toString(23)+'\nevent:kvupdate\ndata: {"tableid":"'+id+'","table":"'+index+'","type": "update","users":'+a.length+',"time":'+Date.now()+',"type":"'+type+'","value":'+value+'}\n\n'))},se_akvupdate=(xsub,index,id,type,value) => {console.log('AKV-UPDATE CALLBACK se_update',index,id,type,value);xsub.subscribers.forEach((e,i,a) => e.write('id:'+Date.now().toString(23)+'\nevent:akvupdate\ndata: {"tableid":"'+id+'","table":"'+index+'","type": "update","users":'+a.length+',"time":'+Date.now()+',"type":"'+type+'","value":'+value+'}\n\n'))},se_pkvupdate=(xsub,index,id,type,value,max) => {console.log('PKV-UPDATE CALLBACK se_pkvupdate',index,id,type,value);xsub.subscribers.forEach((e,i,a) => e.write('id:'+Date.now().toString(23)+'\nevent:pkvupdate\ndata: {"tableid":"'+id+'","table":"'+index+'","type": "update","users":'+a.length+',"time":'+Date.now()+',"type":"'+type+'","value":'+value+',"max":'+max+'}\n\n'))},se_delete=(xsub,index,id) => {console.log('DELETE CALLBACK se_delete',index,id);xsub.subscribers.forEach((e,i,a) => {e.write('id:'+Date.now().toString(23)+'\nevent:delete\ndata: {"tableid":"'+id+'","table":"'+index+'","type": "delete","users":'+a.length+',"time":'+Date.now()+'}\n\n')})},se_add=(xsub,index,id,elem) => {console.log('ADD CALLBACK se_add',index,elem);xsub.subscribers.forEach((e,i,a) => e.write('id:'+Date.now().toString(23)+'\nevent:add\ndata: {"tableid":"'+id+'","table":"'+index+'","type": "add","users":'+a.length+',"time":'+Date.now()+',"elem":'+JSON.stringify(elem)+'}\n\n'))},se_bulkadd=(xsub,index,elem) => {console.log('BULK_ADD CALLBACK se_bulkadd',index,elem);xsub.subscribers.forEach((e,i,a) => e.write('id:'+Date.now().toString(23)+'\nevent:badd\ndata: {"table":"'+index+'","type": "add","users":'+a.length+',"time":'+Date.now()+',"elem":'+JSON.stringify(elem)+'}\n\n'))};var exports=module.exports={};exports.keep=se_keep;exports.put=se_update;exports.bput=se_bupdate;exports.kvput=se_kvupdate;exports.akvput=se_akvupdate;exports.pkvput=se_pkvupdate;exports.delete=se_delete;exports.post=se_add;exports.bpost=se_bulkadd;
